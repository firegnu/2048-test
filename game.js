function ellipsizeText(e,t,a){var i=e.text.length;this.fixLenght=Math.floor(t*i/e.width)-2,this.newText=e.text.substr(0,this.fixLenght)+"...",e.text=this.newText,1===a&&(e.x=game.camera.x+10+e.width/2),3===a&&(e.x=game.camera.x+(game.camera.width-10)-e.width/2)}function JioKaiAds(e){this.adsWrapperId=e}var locale={getLocale:navigator.mozL10n.get};Phaser.Plugin.Navigator=function(e,t){Phaser.Plugin.call(this,e,t)},Phaser.Plugin.Navigator.prototype=Object.create(Phaser.Plugin.prototype),Phaser.Plugin.Navigator.prototype.constructor=Phaser.Plugin.SamplePlugin,Phaser.Plugin.Navigator.prototype.stack=[],Phaser.Plugin.Navigator.prototype.init=function(){game.softkey=game.plugins.add(Phaser.Plugin.Softkey)},Phaser.Plugin.Navigator.prototype.register=function(e){this.stack.push(Object.assign({},game.softkey.getLastConfig())),this.group=game.softkey.config({style:e.style,label:e.label}),game.softkey.listener(e.action)},Phaser.Plugin.Navigator.prototype.setLastConfig=function(){var e=this.stack.pop();this.group=game.softkey.config({style:e.style,label:e.label}),game.softkey.listener(e.action)},Phaser.Plugin.Navigator.prototype.stackPopAll=function(){this.stack=[]},Phaser.Plugin.Navigator.prototype.destroy=function(){this.group.kill()},Phaser.Plugin.Softkey=function(e,t){Phaser.Plugin.call(this,e,t)},Phaser.Plugin.Softkey.prototype=Object.create(Phaser.Plugin.prototype),Phaser.Plugin.Softkey.prototype.constructor=Phaser.Plugin.SamplePlugin,Phaser.Plugin.Softkey.prototype.skGroup=null,Phaser.Plugin.Softkey.prototype.lastConfig={},Phaser.Plugin.Softkey.prototype.defaultHandler={},Phaser.Plugin.Softkey.prototype.listener=function(e){self=this,this.lastConfig.action=e,window.onkeydown=function(t){self._keyPress(t,e)}},Phaser.Plugin.Softkey.prototype.config=function(e){if(e.label)return e.style||(e.style={font:"16px Arial",fill:"#ffffff"}),this.skGroup&&this.skGroup.removeAll(),this.skGroup=game.add.group(),this.skGroup.fixedToCamera=!0,this.skGroup.cameraOffset.setTo(-game.camera.x,-game.camera.y),this.lastConfig.label=e.label,this.lastConfig.style=e.style,this.centerX=game.camera.x+game.camera.width/2,this.portionLenght=Math.round(.9*game.camera.width/3),void 0!==e.label.lsk&&(this.lsk=game.add.text(game.camera.x+10,game.camera.y+(game.camera.height-12),e.label.lsk,e.style),this.lsk.x=game.camera.x+10+this.lsk.width/2,this.lsk.anchor.setTo(.5),this.skGroup.add(this.lsk)),void 0!==e.label.csk&&(this.csk=game.add.text(this.centerX,game.camera.y+(game.camera.height-12),e.label.csk,e.style),this.csk.anchor.setTo(.5),this.skGroup.add(this.csk),this.portionLenght<this.csk.width&&ellipsizeText(this.csk,this.portionLenght)),void 0!==e.label.rsk&&(this.rsk=game.add.text(190,game.camera.y+(game.camera.height-12),e.label.rsk,e.style),this.rsk.x=game.camera.x+(game.camera.width-10)-this.rsk.width/2,this.rsk.anchor.setTo(.5),this.skGroup.add(this.rsk),this.portionLenght<this.rsk.width&&ellipsizeText(this.rsk,this.portionLenght,3)),this.skGroup},Phaser.Plugin.Softkey.prototype.getLastConfig=function(){return this.lastConfig},Phaser.Plugin.Softkey.prototype._keyPress=function(e,t){var a=null,i=this._debug(e);switch(i){case"SoftLeft":t.softLeft&&(a=t.softLeft,e.preventDefault());break;case"Enter":t.enter&&(a=t.enter,e.preventDefault());break;case"MicrophoneToggle":e.preventDefault();break;case"SoftRight":t.softRight&&(a=t.softRight,e.preventDefault());break;case"Backspace":t.backspace&&(a=function(){e.preventDefault(),e.stopImmediatePropagation(),t.backspace()});break;case"EndCall":t.endCall&&(a=function(){e.preventDefault(),e.stopImmediatePropagation(),t.endCall()});break;default:t[i]&&(a=t[i])}a||(a=this.defaultHandler[i]),a&&a()},Phaser.Plugin.Softkey.prototype._debug=function(e){if(game.custom&&game.custom.debug&&(console.warn("[Phaser.Plugin.Softkey] in debug mode!",e.key),e.shiftKey))switch(e.key){case"ArrowLeft":return"SoftLeft";case"ArrowRight":return"SoftRight"}return e.key};var score={score:0,softkey:null,locale:null,preload:function(){game.load.image("bg","assets/bg-home.png")},create:function(){game.add.tileSprite(0,0,240,320,"bg"),this.renderText(),this.bind()},bind:function(){game.navigator.register({style:game.custom.fontStyle,label:{lsk:locale.getLocale("home")},action:{softLeft:function(){game.state.start("menu")}}}),game.navigator.group.children.forEach(function(e){e.setShadow(3,3,"rgba(0,0,0,0.3)",5)})},renderText:function(){var e=Object.assign({},game.custom.fontStyle);e.fontSize="24px";var t=game.add.text(game.world.centerX,100,locale.getLocale("bestscore"),e);t.anchor.set(.5),t.setShadow(3,3,"rgba(0,0,0,0.3)",5),e.fontSize="50px";var a=game.add.text(game.world.centerX,170,this.loadScore(),e);a.anchor.set(.5)},loadScore:function(){var e=localStorage.getItem("highscore");return null!==e?this.formatScore(e,4):this.formatScore(0,4)},formatScore:function(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a}},options={listenerUp:null,listenerDown:null,focus:null,focus2:null,soundOn:null,soundOff:null,vibrationOn:null,vibrationOff:null,index:0,softkey:null,locale:null,preload:function(){game.load.image("bg","assets/bg-home.png"),game.load.image("focus","assets/focus-1.png"),game.load.image("on","assets/select-on.png"),game.load.image("off","assets/select-off.png")},create:function(){this.index=0,game.add.tileSprite(0,0,240,320,"bg"),this.focus=game.add.sprite(game.world.centerX,190,"focus"),this.focus.anchor.setTo(.5),this.focus.visible=!0,this.focus2=game.add.sprite(game.world.centerX,228,"focus"),this.focus2.anchor.setTo(.5),this.focus2.visible=!1,this.soundOn=game.add.tileSprite(180,180,28,15,"on"),this.soundOn.visible=!1,this.soundOff=game.add.tileSprite(180,180,28,15,"off"),this.soundOff.visible=!1,this.vibrationOn=game.add.tileSprite(180,220,28,15,"on"),this.vibrationOn.visible=!1,this.vibrationOff=game.add.tileSprite(180,220,28,15,"off"),this.vibrationOff.visible=!1,this.renderText(),this.bind(),this.loadSound(),this.loadVibration()},bind:function(){var e=this;game.navigator.register({style:game.custom.fontStyle,label:{lsk:locale.getLocale("home"),rsk:locale.getLocale("about")},action:{softLeft:function(){game.state.start("menu")},enter:function(){e.select()},softRight:function(){game.state.start("about")}}});var t=game.navigator.group;t.children.forEach(function(e){e.setShadow(3,3,"rgba(0,0,0,0.3)",5)}),this.listenerUp=game.input.keyboard.addKey(Phaser.Keyboard.UP),this.listenerUp.onDown.add(this.up,this),this.listenerDown=game.input.keyboard.addKey(Phaser.Keyboard.DOWN),this.listenerDown.onDown.add(this.down,this)},renderText:function(){var e=Object.assign({},game.custom.fontStyle);e.fontSize="24px";var t=game.add.text(game.world.centerX,100,locale.getLocale("options"),e);t.anchor.set(.5),t.setShadow(3,3,"rgba(0,0,0,0.3)",5);var a=game.add.text(43,180,locale.getLocale("sound"),game.custom.fontStyle);a.setShadow(3,3,"rgba(0,0,0,0.3)",5);var i=game.add.text(43,220,locale.getLocale("vibration"),game.custom.fontStyle);i.setShadow(3,3,"rgba(0,0,0,0.3)",5)},select:function(){switch(this.index){case 0:this.saveData("sound",(!this.soundOn.visible).toString()),this.loadSound();break;case 1:this.saveData("vibration",(!this.vibrationOn.visible).toString()),this.loadVibration()}},up:function(){1===this.index&&(--this.index,this.focus.visible=!0,this.focus2.visible=!1)},down:function(){this.index<1&&(++this.index,this.focus.visible=!1,this.focus2.visible=!0)},saveData:function(e,t){localStorage.setItem(e,t)},loadData:function(e){var t=localStorage.getItem(e);return null===t||void 0===t?(this.saveData(e,"true"),"true"):t?t:void 0},loadSound:function(){var e=this.loadData("sound");return this.soundOn.visible="true"===e,this.soundOff.visible="false"===e,e},loadVibration:function(){var e=this.loadData("vibration");return this.vibrationOn.visible="true"===e,this.vibrationOff.visible="false"===e,e}},about={softkey:null,locale:null,preload:function(){game.load.image("bg","assets/bg-home.png"),game.load.image("logo","assets/kaios-logo.png")},create:function(){game.add.tileSprite(0,0,240,320,"bg"),this.renderText(),this.bind()},bind:function(){game.navigator.register({style:game.custom.fontStyle,label:{lsk:locale.getLocale("home")},action:{softLeft:function(){game.state.start("menu")}}}),game.navigator.group.children.forEach(function(e){e.setShadow(3,3,"rgba(0,0,0,0.3)",5)})},renderText:function(){var e=Object.assign({},game.custom.fontStyle);e.fontSize=24;var t=game.add.text(game.world.centerX,70,locale.getLocale("about"),e);t.anchor.set(.5),e.align="center",e.fontSize=16;var a=game.add.text(t.x,t.y+60,locale.getLocale("aboutText"),e);a.anchor.set(.5),a.wordWrap=!0,a.wordWrapWidth=200;var i=game.add.sprite(a.x,a.y+70,"logo");i.anchor.setTo(.5)}},Render={},MainGame={tileSize:49,colors:{2:"tile-2.png",4:"tile-4.png",8:"tile-8.png",16:"tile-16.png",32:"tile-32.png",64:"tile-64.png",128:"tile-128.png",256:"tile-256.png",512:"tile-512.png",1024:"tile-1024.png",2048:"tile-2048.png",4096:"tile-4096.png",8192:"tile-8192.png",16384:"tile-16384.png",32768:"tile-32768.png",65536:"tile-65536.png"},canMove:!1,didWin:!1,playHitSound:!1,isPaused:!1,isWin:!1,isLose:!1,locale:null,preload:function(){game.load.audio("hitSound","assets/sfx/hit.wav"),game.load.image("logo","assets/logo-2048.png"),game.load.image("bg","assets/bg-1.png"),game.load.image("bg-options","assets/bg-3.png"),game.load.image("bg-youlose","assets/bg-5.png"),game.load.image("bg-youwin","assets/bg-4.png"),game.load.image("bggame","assets/bg-game.png"),game.load.image("youlose","assets/game-over_msg-2.png"),game.load.image("youwin","assets/game-over_msg-1.png"),game.load.image("bg-dialog","assets/dialog.png"),game.load.image("focus","assets/focus-1.png"),game.load.image("on","assets/select-on.png"),game.load.image("off","assets/select-off.png");for(var e in this.colors)game.load.image("tile-"+e,"assets/tiles/tile-"+e+".png")},create:function(){this.isPaused=!1,this.didWin=!1,this.hitSound=game.add.audio("hitSound"),this.hitSound.volume=5,this.fieldArray=new Array(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),this.currentScore=0,this.movimentScore=0,this.brickScore=0,this.scoreText=0,this.highScore=localStorage.getItem("highscore")||0,game.add.tileSprite(0,0,240,320,"bg"),game.add.image(19,77,"bggame"),Render.Score(this),this.bind(),this.tileSprites=game.add.group(),this.addTile(),this.addTile(),this.tileSprites.position.x=22,this.tileSprites.position.y=80},update:function(){},optionPause:function(){Render.Options.show(this)},bind:function(){var e=this;game.navigator.register({style:game.custom.fontStyle,label:{lsk:locale.getLocale("restart"),rsk:locale.getLocale("options")},action:{softLeft:function(){game.ads.nextState="MainGame",Render.Restart.show()},softRight:function(){e.optionPause()},ArrowUp:function(){e.moveUp()},ArrowDown:function(){e.moveDown()},ArrowLeft:function(){e.moveLeft()},ArrowRight:function(){e.moveRight()},2:function(){e.moveUp()},8:function(){e.moveDown()},4:function(){e.moveLeft()},6:function(){e.moveRight()},0:function(){e.optionPause()}}}),game.navigator.group.children.forEach(function(e){e.setShadow(3,3,"rgba(0,0,0,0.3)",5)})},addTile:function(){var e=Math.random()<.9?2:4;do var t=Math.floor(16*Math.random());while(0!=this.fieldArray[t]);this.fieldArray[t]=e;var a=game.add.sprite(this.toCol(t)*this.tileSize,this.toRow(t)*this.tileSize,"tile-"+e);a.scale.setTo(.99),a.pos=t,a.alpha=0;var i=Object.assign({},game.custom.fontStyle);i.fontColor="#FFFFFF",i.fontSize=14;var o=game.add.text(this.tileSize/2,this.tileSize/2,e,i);o.anchor.set(.5),a.addChild(o),this.tileSprites.add(a);var s=game.add.tween(a);s.to({alpha:1},250),s.onComplete.add(function(){this.updateNumbers(),this.canMove=!0,this.checkYouLose(),this.checkYouWin()}.bind(this)),s.start()},toRow:function(e){return Math.floor(e/4)},toCol:function(e){return e%4},updateNumbers:function(){this.tileSprites.forEach(function(e){var t=this.fieldArray[e.pos];e.getChildAt(0).text=t,e.loadTexture("tile-"+t,0)}.bind(this)),this.brickScore=Math.max.apply(Math,this.fieldArray)},endMove:function(e){e?this.addTile():this.canMove=!0,this.playHitSound=!1,this.currentScore+=this.movimentScore,this.scoreText.text=this.currentScore},moveTile:function(e,t,a,i){this.fieldArray[a]=this.fieldArray[t],this.fieldArray[t]=0,e.pos=a;var o=game.add.tween(e);if(o.to({x:this.tileSize*this.toCol(a),y:this.tileSize*this.toRow(a)},150),o.start(),i){var s=game.add.tween(e);s.to({x:this.tileSize*this.toCol(a),y:this.tileSize*this.toRow(a)},150),this.fieldArray[a]*=2,this.playHitSound?s.onComplete.add(function(){e.destroy()}.bind(this)):(this.playHitSound=!0,s.onComplete.add(function(){e.destroy(),Render.Options.loadData("sound")&&this.hitSound.play(),Render.Options.loadData("vibration")&&navigator.vibrate&&navigator.vibrate(50)}.bind(this))),s.start()}},moveUp:function(){if(this.canMove){this.canMove=!1;var e=!1;this.tileSprites.sort("y",Phaser.Group.SORT_ASCENDING),this.tileSprites.forEach(function(t){var a=this.toRow(t.pos),o=this.toCol(t.pos);if(a>0){var s=!1;for(i=a-1;i>=0;i--)if(0!=this.fieldArray[4*i+o]){this.fieldArray[4*i+o]==this.fieldArray[4*a+o]&&(this.movimentScore+=this.fieldArray[4*i+o]+this.fieldArray[4*a+o],s=!0,i--);break}a!=i+1&&(e=!0,this.moveTile(t,4*a+o,4*(i+1)+o,s))}}.bind(this)),this.endMove(e)}},moveRight:function(){if(this.canMove){this.canMove=!1;var e=!1;this.tileSprites.sort("x",Phaser.Group.SORT_DESCENDING),this.tileSprites.forEach(function(t){var a=this.toRow(t.pos),o=this.toCol(t.pos);if(o<3){var s=!1;for(i=o+1;i<=3;i++)if(0!=this.fieldArray[4*a+i]){this.fieldArray[4*a+i]==this.fieldArray[4*a+o]&&(this.movimentScore+=this.fieldArray[4*a+i]+this.fieldArray[4*a+o],s=!0,i++);break}o!=i-1&&(e=!0,this.moveTile(t,4*a+o,4*a+i-1,s))}}.bind(this)),this.endMove(e)}},moveDown:function(){if(this.canMove){this.canMove=!1;var e=!1;this.tileSprites.sort("y",Phaser.Group.SORT_DESCENDING),this.tileSprites.forEach(function(t){var a=this.toRow(t.pos),o=this.toCol(t.pos);if(a<3){var s=!1;for(i=a+1;i<=3;i++)if(0!=this.fieldArray[4*i+o]){this.fieldArray[4*i+o]==this.fieldArray[4*a+o]&&(this.movimentScore+=this.fieldArray[4*i+o]+this.fieldArray[4*a+o],s=!0,i++);break}a!=i-1&&(e=!0,this.moveTile(t,4*a+o,4*(i-1)+o,s))}}.bind(this)),this.endMove(e)}},moveLeft:function(){if(this.canMove){this.canMove=!1;var e=!1;this.tileSprites.sort("x",Phaser.Group.SORT_ASCENDING),this.tileSprites.forEach(function(t){var a=this.toRow(t.pos),o=this.toCol(t.pos);if(o>0){var s=!1;for(i=o-1;i>=0;i--)if(0!=this.fieldArray[4*a+i]){this.fieldArray[4*a+i]==this.fieldArray[4*a+o]&&(this.movimentScore+=this.fieldArray[4*a+i]+this.fieldArray[4*a+o],s=!0,i--);break}o!=i+1&&(e=!0,this.moveTile(t,4*a+o,4*a+i+1,s))}}.bind(this)),this.endMove(e)}},isGameOver:function(){for(var e=this.fieldArray,t=0,a=e.length;t<a;t++){var i=next=1,o=down=4;if(t%4==3&&(next=999),t%4==0&&(i=999),e[t]==(e[t-o]||0)||e[t]==(e[t-i]||0)||e[t]==(e[t+next]||0)||e[t]==(e[t+down]||0))return!1}return!0},saveScore:function(){this.currentScore>=this.highScore&&localStorage.setItem("highscore",this.currentScore)},checkYouLose:function(){var e=1;this.fieldArray.forEach(function(t){0!=t&&e++}),e>=16&&this.isGameOver()&&(this.saveScore(),Render.YouLose.show(this.currentScore))},checkYouWin:function(){2048!==this.brickScore||this.didWin?(this.movimentScore=0,this.brickScore=0):(this.saveScore(),Render.YouWin.show(this.currentScore))}};document.addEventListener("visibilitychange",function(e){document.hidden&&"MainGame"===game.state.current&&(Render.Confirm.isOpen||Render.Options.isPaused||Render.YouWin.isWin||Render.YouLose.isLose||(Render.Restart.hide(),MainGame.optionPause()))});var menu={softkey:null,locale:null,preload:function(){game.load.image("bg","assets/bg-home.png"),game.load.image("logo","assets/logo-2048.png"),game.load.image("focus-start","assets/focus-3.png"),game.navigator=game.plugins.add(Phaser.Plugin.Navigator)},create:function(){game.init=!0,game.add.sprite(0,0,"bg"),this.renderText(),this.bind()},bind:function(){game.navigator.register({style:game.custom.fontStyle,label:{lsk:locale.getLocale("score"),rsk:locale.getLocale("options")},action:{softLeft:function(){game.state.start("score")},enter:function(){game.state.start("MainGame")},softRight:function(){game.state.start("options")}}}),game.navigator.group.children.forEach(function(e){e.setShadow(3,3,"rgba(0,0,0,0.3)",5)})},renderText:function(){var e=game.add.sprite(game.world.centerX,game.world.centerY-50,"logo");e.anchor.setTo(.5);var t=game.add.sprite(game.world.centerX,game.world.centerY+70,"focus-start");t.anchor.setTo(.5);var a=Object.assign({},game.custom.fontStyle);a.fontWeight="bold",a.fontSize=20;var i=game.add.text(t.x,t.y+3,locale.getLocale("start"),a);i.anchor.set(.5),i.setShadow(3,3,"rgba(0,0,0,0.3)",5)}},ads={init:function(e){this.adname=e},create:function(){game.sound.mute=!0;var e=function(){game.sound.mute=!1,window.focus(),game.state.start(game.ads.nextState)};game.ads.showAds({adname:this.adname,onAdFinished:e}),this.bind()},bind:function(){game.navigator&&game.navigator.register({style:game.custom.fontStyle,label:{},action:{softLeft:function(){},enter:function(){},softRight:function(){},backspace:function(){},endCall:function(){}}})}};JioKaiAds.prototype.showAds=function(e){const t=document.createElement("iframe");t.setAttribute("id","iframe-ads"),t.setAttribute("style","border: none;"),document.getElementById(this.adsWrapperId).appendChild(t);const a=KaiDisplayAdsSdk("iframe-ads");a.init({banner:{w:window.screen.width,h:window.screen.height-26,topmargin:26,adspotkey:"434ca6a0",pkgname:"com.kaiostech.2048",adrefresh:0,customData:"",advid:window.advid,uid:window.uid},listeners:{adclose:function(){console.log("ad close 1"),e.onAdFinished()}}})};var game=new Phaser.Game(240,320,Phaser.CANVAS,"phaser-game");game.custom={fontStyle:{font:"DINPro-Bold",fontSize:"16px",fill:"#FFFFFF"}},document.addEventListener("keydown",function(e){"ArrowDown"===e.key&&e.preventDefault()}),document.addEventListener("keydown",function(e){"ArrowUp"===e.key&&e.preventDefault()}),game.ads=new JioKaiAds("adsWrapper"),game.state.add("ads",ads),game.state.add("menu",menu),game.state.add("MainGame",MainGame),game.state.add("about",about),game.state.add("options",options),game.state.add("score",score),game.init=!1,navigator.mozL10n.ready(function(){Render.Options.isPaused&&Render.Options.hide(),Render.Confirm.isOpen&&Render.Confirm.hide(),Render.YouLose.isLose&&Render.YouLose.hide(),game.paused=!1,game.init?game.state.start("menu"):(game.ads.nextState="menu",game.state.start("ads",!0,!1,"splash"))}),Render.Confirm={isOpen:!1,show:function(){game.paused=!0,MainGame.canMove=!1,this.isOpen=!0,this.confirmGroup=game.add.group();var e=game.add.graphics();e.beginFill(0,.9),e.drawRect(0,0,240,320),window.ads&&"function"==typeof window.ads.call?game.navigator.register({style:game.custom.fontStyle,label:{lsk:locale.getLocale("viewAds"),rsk:locale.getLocale("quit")},action:{softLeft:function(){window.ads.call("click")},enter:function(){window.ads.call("click")},softRight:function(){},backspace:function(){Render.Confirm.hide()},endCall:function(){}}}):game.navigator.register({style:game.custom.fontStyle,label:{lsk:locale.getLocale("cancel"),rsk:locale.getLocale("quit")},action:{softLeft:function(){Render.Confirm.hide()},softRight:function(){},backspace:function(){Render.Confirm.hide()},endCall:function(){}}});var t=game.add.image(game.world.centerX,game.world.centerY-50,"logo");t.anchor.setTo(.5);var a=game.add.image(game.world.centerX,game.height-80,"bg-dialog");a.anchor.setTo(.5);var i=game.add.text(a.x,a.y,locale.getLocale("confirmText"),{fontSize:16,align:"center",fill:"#0a0a0a"});i.anchor.setTo(.5),i.wordWrap=!0,i.wordWrapWidth=200,this.confirmGroup.addMultiple([e,t,a,i])},hide:function(){MainGame.canMove=!0,game.paused=!1,this.isOpen=!1,this.confirmGroup.removeAll(),game.navigator.setLastConfig()}},Render.Restart={isOpen:!1,show:function(){game.paused=!0,MainGame.canMove=!1,this.isOpen=!0,this.confirmGroup=game.add.group();var e=game.add.graphics();if(e.beginFill(0,.9),e.drawRect(0,0,240,320),window.ads&&"function"==typeof window.ads.call)this.confirmGroup.addMultiple([e]),document.getElementById("restartTitle").style.display="block",document.getElementById("confirmTitle").style.display="block",document.getElementById("adscontainer").style.cssText="position: absolute; bottom: 35px; z-index: 1000; width: 100%; height: 250px; display: block",document.getElementById("restartTitle").innerHTML=locale.getLocale("restart"),document.getElementById("confirmTitle").innerHTML=locale.getLocale("RestartText"),game.navigator.register({style:game.custom.fontStyle,label:{lsk:locale.getLocale("viewAds"),rsk:locale.getLocale("yes")},action:{softLeft:function(){window.ads.call("click")},enter:function(){window.ads.call("click")},softRight:function(){Render.Restart.hide(),game.ads.nextState="MainGame",game.state.start("ads",!0,!1,"playAgain")},backspace:function(){Render.Restart.hide()},endCall:function(){}}});else{var t=game.add.image(game.world.centerX,game.height-90,"bg-dialog");t.anchor.setTo(.5);var a=game.add.text(t.x,t.y,locale.getLocale("RestartText"),{fontSize:16,align:"center",fill:"#0a0a0a"});a.anchor.setTo(.5),a.wordWrap=!0,a.wordWrapWidth=240,this.confirmGroup.addMultiple([e,t,a]),game.navigator.register({style:game.custom.fontStyle,label:{lsk:locale.getLocale("yes")},action:{softLeft:function(){Render.Restart.hide(),game.ads.nextState="MainGame",game.state.start("ads",!0,!1,"playAgain")},backspace:function(){Render.Restart.hide()},endCall:function(){}}})}},hide:function(){MainGame.canMove=!0,game.paused=!1,this.isOpen=!1,this.confirmGroup.removeAll(),game.navigator.setLastConfig(),document.getElementById("restartTitle").style.display="none",document.getElementById("adscontainer").style.cssText="position: absolute; top: 0px; z-index: 1000; width: 100%; height: 54px; display: none"}},Render.Options={show:function(){this.isPaused=!0,MainGame.canMove=!1,this.optionsGroup=game.add.group();var e=game.add.image(0,0,"bg-options");e.alpha=.9,game.navigator.register({style:game.custom.fontStyle,label:{lsk:locale.getLocale("home"),rsk:locale.getLocale("resume")},action:{softLeft:function(){Render.Options.hide(),game.state.start("menu")},enter:function(){Render.Options.selectOpValue()},softRight:function(){Render.Options.hide()},0:function(){Render.Options.hide()}}}),this.focus=game.add.sprite(game.world.centerX,190,"focus"),this.focus.anchor.setTo(.5),this.focus.visible=!0,this.focus2=game.add.sprite(game.world.centerX,228,"focus"),this.focus2.anchor.setTo(.5),this.focus2.visible=!1,this.soundOn=game.add.tileSprite(180,180,28,15,"on"),this.soundOn.visible=!1,this.soundOff=game.add.tileSprite(180,180,28,15,"off"),this.soundOff.visible=!1,this.vibrationOn=game.add.tileSprite(180,220,28,15,"on"),this.vibrationOn.visible=!1,this.vibrationOff=game.add.tileSprite(180,220,28,15,"off"),this.vibrationOff.visible=!1,this.index=0,this.listenerUp=game.input.keyboard.addKey(Phaser.Keyboard.UP).onDown.add(function(){1===this.index&&(--this.index,this.focus.visible=!0,this.focus2.visible=!1)},this),this.listenerDown=game.input.keyboard.addKey(Phaser.Keyboard.DOWN).onDown.add(function(){this.index<1&&(++this.index,this.focus.visible=!1,this.focus2.visible=!0)},this),this.loadSound(),this.loadVibration();var t=Object.assign({},game.custom.fontStyle);t.fontSize="24px";var a=game.add.text(game.world.centerX,100,locale.getLocale("pause"),t);a.anchor.set(.5),a.setShadow(3,3,"rgba(0,0,0,0.3)",5);var i=game.add.text(43,180,locale.getLocale("sound"),game.custom.fontStyle);i.setShadow(3,3,"rgba(0,0,0,0.3)",5);var o=game.add.text(43,220,locale.getLocale("vibration"),game.custom.fontStyle);o.setShadow(3,3,"rgba(0,0,0,0.3)",5),this.optionsGroup.addMultiple([e,this.focus,this.focus2,a,i,o,this.vibrationOn,this.vibrationOff,this.soundOff,this.soundOn])},hide:function(){MainGame.canMove=!0,game.paused=!1,this.optionsGroup.removeAll(),game.navigator.setLastConfig(),this.isPaused=!1},selectOpValue:function(){switch(this.index){case 0:this.saveData("sound",(!this.soundOn.visible).toString()),this.loadSound();break;case 1:this.saveData("vibration",(!this.vibrationOn.visible).toString()),this.loadVibration()}},saveData:function(e,t){localStorage.setItem(e,t)},loadData:function(e){var t=JSON.parse(localStorage.getItem(e));return null===t||void 0===t?(this.saveData(e,!0),!0):t},loadSound:function(){var e=this.loadData("sound");this.soundOn.visible=e,this.soundOff.visible=!e},loadVibration:function(){var e=this.loadData("vibration");this.vibrationOn.visible=e,this.vibrationOff.visible=!e}},Render.Score=function(e){var t=Object.assign({},game.custom.fontStyle),a=Object.assign({},game.custom.fontStyle),i=Object.assign({},game.custom.fontStyle);t.fontSize=14,a.fontSize=18,t.align="center",e.hscoreTxt=game.add.text(game.world.centerX,47,locale.getLocale("bestscore"),t),e.hscoreTxt.anchor.setTo(.5),e.hscoreTxt.lineSpacing=-6,e.hscorePoints=game.add.text(game.world.centerX,67,e.highScore,a),e.hscorePoints.anchor.setTo(.5),i.fontSize=24,e.scoreText=game.add.text(game.world.centerX+10,game.height-15,"",i),e.scoreText.anchor.setTo(.5),e.scoreText.lineSpacing=-10},Render.YouLose={isLose:!1,show:function(e){this.isLose=!0,MainGame.canMove=!1,this.youLoseGroup=game.add.group();var t=game.add.image(0,0,"bg-youlose");game.navigator.register({style:game.custom.fontStyle,label:{lsk:locale.getLocale("home"),rsk:locale.getLocale("otherRestart")},action:{softLeft:function(){Render.YouLose.hide(),game.ads.nextState="menu",game.state.start("ads",!0,!1,"goHome")},softRight:function(){Render.YouLose.hide(),game.ads.nextState="MainGame",game.state.start("ads",!0,!1,"playAgain")}}});var a=Object.assign({},game.custom.fontStyle),i=game.add.image(game.world.centerX,90,"youlose");i.anchor.setTo(.5),a.fontSize=20;var o=game.add.text(i.x,80,locale.getLocale("ohNo"),a);o.anchor.setTo(.5,.5);var s=game.add.text(i.x,105,locale.getLocale("youlose"),a);s.anchor.setTo(.5,.5),a.fontSize=16;var n=game.add.text(game.world.centerX,game.world.centerY,locale.getLocale("score"),a);n.anchor.setTo(.5),a.fontSize=50;var r=game.add.text(n.x,n.y+35,e,a);r.anchor.setTo(.5),this.youLoseGroup.addMultiple([t,i,o,s,n,r])},hide:function(){MainGame.canMove=!0,this.isLose=!1,this.youLoseGroup.removeAll(),game.navigator.setLastConfig()}},Render.YouWin={isWin:!1,show:function(e){this.isWin=!0,MainGame.didWin=!0,MainGame.canMove=!1,this.youWinGroup=game.add.group();var t=game.add.image(0,0,"bg-youwin");game.navigator.register({style:game.custom.fontStyle,label:{lsk:locale.getLocale("home"),csk:locale.getLocale("continue"),rsk:locale.getLocale("otherRestart")},action:{softLeft:function(){Render.YouWin.hide(),game.ads.nextState="menu",game.state.start("ads",!0,!1,"goHome")},enter:function(){Render.YouWin.hide()},softRight:function(){this.isWin=!1,game.ads.nextState="MainGame",game.state.start("ads",!0,!1,"playAgain"),Render.YouWin.hide()}}});var a=Object.assign({},game.custom.fontStyle),i=game.add.image(game.world.centerX,90,"youwin");i.anchor.setTo(.5),a.fontSize=18;var o=game.add.text(i.x,80,locale.getLocale("congratulations"),a);o.anchor.setTo(.5,.5);var s=game.add.text(i.x,105,locale.getLocale("youGot"),a);s.anchor.setTo(.5,.5),a.fontSize=16;var n=game.add.text(game.world.centerX,game.world.centerY,locale.getLocale("score"),a);n.anchor.setTo(.5),a.fontSize=50;var r=game.add.text(n.x,n.y+35,e,a);r.anchor.setTo(.5),this.youWinGroup.addMultiple([t,i,o,s,n,r])},hide:function(){MainGame.canMove=!0,this.isWin=!1,this.youWinGroup.removeAll(),game.navigator.setLastConfig()}};